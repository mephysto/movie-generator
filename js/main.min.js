"use strict";!function(){var e="http://mephysto.github.io/movie-generator/",t="https://moviegenerator.herokuapp.com/movie",n=new XMLHttpRequest;n.onreadystatechange=function(e){4===n.readyState&&200===n.status&&(document.querySelector(".btn-generate").classList.remove("loading"),a.plot=JSON.parse(n.responseText).movie,l())};var o=function(){n.open("GET",t),n.send()},r="",a={title:"",plot:""},c=new Audio(e+"audio/paper.mp3"),l=function(){console.log("generateNewMovie");var e=function(){var e=document.querySelectorAll(".movie-text > blockquote").length,t=20*Math.random()-10,n=e+100<175?e+100:175;return"translate3d(-50%,-50%,"+n+"px) rotate("+t.toFixed(3)+"deg)"},t=function(){var e=document.querySelectorAll(".movie-text > blockquote").length,t=5*Math.random()-2.5,n=e<=1?-50:-40-20*Math.random(),o=e<=1?-50:-40-20*Math.random(),r=0;return"translate3d("+n.toFixed(2)+"%, "+o.toFixed(1)+"%, "+r+"px) rotate("+t.toFixed(3)+"deg)"},n=function(t){var n=document.createElement("blockquote");n.classList.add("new"),n.style.transform=e();var o=document.createElement("div");o.classList.add("perforation");var r=document.createElement("div");r.classList.add("quotetext");var a=document.createElement("p");a.innerHTML=t,r.appendChild(a),n.appendChild(o),n.appendChild(r);var c=document.createElement("div");return r.appendChild(c),n},o=document.createElement("p");if(o.innerHTML=a.plot,r=o.innerText,document.querySelector(".new")){var c=document.querySelector(".new");c.removeAttribute("class"),c.style.transform=t()}document.querySelector(".movie-text").appendChild(n(a.plot));var l=document.querySelectorAll(".movie-text > blockquote").length;document.querySelector(".movie-text").style.transform="transform: translateZ(-"+l+" px)"};o();document.querySelector(".btn-generate").onclick=function(e){e.target.classList.add("loading"),e.preventDefault(),ga("send","event","Moviepitch","click","generate new movie pitch",r),o(),c.play()}}();